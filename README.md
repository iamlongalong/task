<div align="center">
  <a href="https://taskfile.dev">
    <img src="docs/static/img/logo.svg" width="200px" height="200px" />
  </a>

  <h1>Task</h1>

  <p>
    Task is a task runner / build tool that aims to be simpler and easier to use than, for example, <a href="https://www.gnu.org/software/make/">GNU Make<a>.
  </p>

  <p>
    <a href="https://taskfile.dev/installation/">Installation</a> | <a href="https://taskfile.dev/usage/">Documentation</a> | <a href="https://twitter.com/taskfiledev">Twitter</a> | <a href="https://fosstodon.org/@task">Mastodon</a> | <a href="https://discord.gg/6TY36E39UK">Discord</a>
  </p>
</div>

## è¯´æ˜

è¿™ä¸ªé¡¹ç›®æ˜¯ä» [go-task/task](https://github.com/go-task/task) ä¸­ fork è¿‡æ¥çš„ã€‚

æŒºå–œæ¬¢è¿™ä¸ªé¡¹ç›®çš„è®¾è®¡ï¼Œç”¨æ¥åš scripts ç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œç›®å‰åœ¨å·¥ä½œä¸­ç”¨æ¥åšä¸€äº›å¸¸ç”¨çš„ç¯å¢ƒå‡†å¤‡ï¼Œæ¯”å¦‚å®‰è£…ä¸€å¥— k8s ç¯å¢ƒã€å®‰è£…ä¸€äº›å¸¸ç”¨å·¥å…·ä¹‹ç±»çš„ã€‚

ç›¸æ¯”äº ansibleï¼Œè¿™ä¸ªé¡¹ç›®æœ€å¸å¼•æˆ‘çš„ç‚¹æœ‰ä¸¤ä¸ªï¼š 

- ä¾èµ–å¾ˆå°‘ï¼Œä¸€ä¸ª 3MB çš„äºŒè¿›åˆ¶å°±èƒ½è·‘ï¼
- åŸºäº yaml çš„é…ç½®ï¼Œå†…å®¹å¾ˆç®€æ´ (æ²¡æœ‰ ansible å°è£…çš„é‚£ç§è‡ªå®šä¹‰çš„ schema ç»“æ„)

ä½†åœ¨ä½¿ç”¨ä¸­ä¹Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œä¸»è¦è¿˜æ˜¯åœ¨ ç¯å¢ƒå˜é‡çš„ä¼ é€’é—®é¢˜ï¼ï¼ï¼

ä½œè€…åœ¨ Q&A ä¸­ä¹Ÿè§£é‡Šäº†ä¸åŒ shell é—´ä¸èƒ½å…±äº«ç¯å¢ƒå˜é‡ï¼Œè¿™åœ¨åŒä¸€å±‚çº§çš„ä»»åŠ¡ä¸­å…¶å®å¾ˆå¥½ç†è§£ã€‚

ä½†æˆ‘çš„åœºæ™¯æ˜¯ï¼Œåœ¨ä¸€ä¸ª task ä¸­é€šè¿‡è°ƒç”¨å¦ä¸€ä¸ª taskï¼Œå†™æ³•å¦‚ä¸‹ï¼š

```yaml

tasks:
  parent_task:
    env:
      MY_ENV: "value from parent"
    cmds:
      - echo "this is parent, and MY_ENV is $MY_ENV"
      - task: child_task
  child_task:
    cmds:
      - 'echo "this is child, and I DO NOT HAS MY_ENV !!!  see: $MY_ENV"'
```

è¿™éå¸¸ä»¤äººç–‘æƒ‘ ğŸ˜µğŸ˜µğŸ˜µ ä¸ºä»€ä¹ˆåœ¨å­ cmd ä¸­çš„ task å´ä¸èƒ½ç”¨çˆ¶ task çš„ç¯å¢ƒå˜é‡å‘¢ï¼Ÿ

æ‰€ä»¥ï¼Œæˆ‘ fork äº†ä¸€ç‰ˆï¼Œå¢åŠ äº†ä¸€ä¸ª feature: åœ¨å­ cmd ä¸­ï¼Œè‹¥ä½¿ç”¨äº† task, åˆ™ä¼šç»§æ‰¿çˆ¶ task çš„ç¯å¢ƒå˜é‡ã€‚

æŒ‰ç…§åŸæœ‰é€»è¾‘ï¼Œå­ task çš„ç¯å¢ƒå˜é‡ç»§æ‰¿é¡ºåºï¼Œå› æ­¤ä¿®æ”¹åçš„ç¯å¢ƒå˜é‡ç»§æ‰¿é€»è¾‘ä¸º:

taskfile envs => dotenv envs => parent task envs => task envsã€‚

ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œæˆ‘çš„æ”¹åŠ¨ä»…å®ç°äº†åœ¨ä¸€ä¸ª task çš„ cmd ä¸­è°ƒç”¨äº†å¦ä¸€ä¸ª task çš„æƒ…å†µï¼Œ**ä¸åŒ…å«** ä½¿ç”¨ dep çš„æ–¹å¼ã€‚


## TODDO

è€ƒè™‘åˆ°å®é™…ä½¿ç”¨æ—¶çš„åœºæ™¯ï¼Œåç»­å†³å®šå†åŠ ä¸€äº›åŠŸèƒ½ï¼š

- ç¯å¢ƒå˜é‡æ”¯æŒ default è¯­æ³•ï¼Œç±»ä¼¼äº `MY_VAR=${MY_VAR:-"var_default"}` è¿™ç§ï¼Œç”¨äºå­ task ä¸­å®šä¹‰é»˜è®¤çš„ç¯å¢ƒå˜é‡ã€‚ (ç±»ä¼¼äº vars: MY_VAR: sh: "xxx" çš„æ¨¡å¼)
- required ç¯å¢ƒå˜é‡ï¼Œ(ç±»ä¼¼äº required vars) 

è¿™äº›æ”¹åŠ¨éƒ½æ˜¯é’ˆå¯¹ç¯å¢ƒå˜é‡çš„ï¼Œæˆ‘è®¤ä¸ºä¸€ä¸ªè„šæœ¬ç®¡ç†å·¥å…·ï¼Œæœ€å¥½æ˜¯ä¿æŒå…¼å®¹æ€§ï¼Œç¯å¢ƒå˜é‡ ç›¸å¯¹äº æ¨¡æ¿å˜é‡ è€Œè¨€ï¼Œå‰è€…çš„å…¼å®¹æ€§å°±æ›´å¥½ï¼Œå¤§å®¶ç†è§£èµ·æ¥ä¹Ÿæ›´åŠ ç¬¦åˆåŸæ¥çš„ shell è¯­æ³•ã€‚


è¿˜åœ¨çº ç»“è¦ä¸è¦åŠ çš„åŠŸèƒ½ï¼š

- task çš„åŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿå®ç°ä¾èµ–æ”¶é›†ï¼Œç±»ä¼¼äºä»ä¸€ä¸ª repo ä¸­æ‹‰å–æ‰€éœ€è¦çš„è„šæœ¬æ–‡ä»¶ç­‰

> æˆ‘çš„åœºæ™¯æ˜¯ï¼Œå¯åŠ¨ä¸€å°æœºå™¨ç„¶åæ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œå› ä¸ºæ–°å¯åŠ¨çš„æœºå™¨æ²¡æœ‰ä»»ä½• Taskfile æ–‡ä»¶åŠæ‰€è°ƒç”¨çš„æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦ä¸‹è½½ï¼Œé‚£ä¹ˆåœ¨å“ªé‡Œä¸‹è½½ï¼Œä¸‹è½½å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿ
> è¿™ä¸ªåŠŸèƒ½æˆ‘ç°åœ¨æ˜¯ç”¨ä¸€ä¸ª bash script è§£å†³çš„ï¼Œè¡Œä¸ºæ¨¡å¼ä¸Šæœ‰ç‚¹ç±»ä¼¼äº npxã€pipx è¿™ç±»å·¥å…·ï¼Œæ‰€ä»¥åœ¨æƒ³è¦ä¸è¦ç›´æ¥åŠ åˆ° task å†…ç½® task ä¸­ï¼Œä¾‹å¦‚ `task -i pull repo/taskgroup` æˆ–è€… `task -i run repo/taskgroup`
> è¿™æ ·çš„è¯ï¼Œå°†æ¥é›†ä¸­å¼çš„ Taskfile ç®¡ç†å°±æ¯”è¾ƒæ–¹ä¾¿äº†

- å¢åŠ  hooks

> æœ‰ä¸€äº›åœºæ™¯ä¸­ï¼Œåœ¨æ‰§è¡Œä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œéœ€è¦åšä¸€äº›å‰ç½®çš„å¤„ç†ï¼Œæœ‰äº›éœ€è¦æœ‰åç½®çš„å¤„ç†ï¼Œæ¯”å¦‚ æ‰“å°å¼€å§‹å’Œç»“æŸçš„logã€å¯¹ä»»åŠ¡åšç»Ÿè®¡ã€å¼€å§‹å’Œç»“æŸå‘webhooké€šçŸ¥ç­‰ç­‰ã€‚
> hooks åœ¨è¿™ç±»åœºæ™¯ä¸­å¾ˆæœ‰ç”¨ï¼Œæ›´å¥½åœ°å®ç°ä¸€äº›å…¬å…±èƒ½åŠ›çš„å¯å¤ç”¨æ€§ã€‚

ä¸Šé¢è¿™ä¸¤é¡¹èƒ½åŠ›å¯¹é¡¹ç›®çš„æ”¹åŠ¨éƒ½æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ‹¿ä¸å®šä¸»æ„ï¼Œæ”¶é›†ä¸‹å¤§å®¶çš„å»ºè®®å§

å¦‚æœï¼Œä½ è®¤ä¸ºä¸Šé¢çš„åŠŸèƒ½å¯¹ä½ æœ‰ä»·å€¼ï¼Œè¯·åœ¨ issue ä¸­ç•™è¨€æŠ•ä¸ªç¥¨ï¼Œå¹¶æè¿°ä¸€ä¸‹ä½ çš„åœºæ™¯~~
